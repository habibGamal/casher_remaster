import{f as x}from"./faCaretRight.94301215.js";import{j as c,F as C,a,b as U,r as y,a2 as A,a0 as E,d as $}from"./app.0e9403f5.js";import{F as l}from"./index.2c2f005b.js";import{I as u}from"./index.9f46615a.js";import{B as V}from"./button.5253f3cb.js";import{U as M}from"./index.e82ad493.js";import{P as z}from"./PlusOutlined.cf2f5585.js";import{B as Y}from"./Book.7d109b31.js";import"./index.0df5407b.js";import"./index.ba991639.js";import"./type.6e629d5d.js";import"./pickAttrs.90032313.js";import"./useForceUpdate.344e3908.js";import"./DeleteOutlined.5ec303bf.js";import"./progress.3d67026a.js";import"./CheckOutlined.545c81ed.js";(function(e){Object.defineProperty(e,"__esModule",{value:!0});var s="fas",i="caret-right",n=256,m=512,p=[],f="f0da",h="M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z";e.definition={prefix:s,iconName:i,icon:[n,m,p,f,h]},e.faCaretRight=e.definition,e.prefix=s,e.iconName=i,e.width=n,e.height=m,e.ligatures=p,e.unicode=f,e.svgPathData=h,e.aliases=p})(x);function q({id:e,count:s,removeVideo:i,video:n=null}){return console.log(e),c(C,{children:[a("hr",{}),c("h4",{className:"text-lg font-sans text-center my-4",children:["Video No ",s+1]}),a(l.Item,{label:"Video Name",name:`video_name[${e}]`,initialValue:n==null?void 0:n.name,children:a(u,{})}),a(l.Item,{label:"Video Link",name:`video_link[${e}]`,initialValue:n==null?void 0:n.link,children:a(u,{})}),a(l.Item,{wrapperCol:{offset:16,span:20},children:a(V,{onClick:m=>i(m,e),type:"link",danger:!0,children:"- Remove Video"})}),a("hr",{})]})}function j({book:e=null}){var N,F,w,S,B,_,P,D;const[s]=l.useForm(),{errors:i}=U().props,[n,m]=y.exports.useState((e==null?void 0:e.videos.map((t,r)=>r))||[]),[p,f]=y.exports.useState(e?e.videos.length-1:-1),h=t=>{t.preventDefault(),m(r=>[...r,p+1]),f(r=>r+1)},L=(t,r)=>{t.preventDefault(),m(v=>v.filter(g=>g!==r))},[o,I]=y.exports.useState(e?[{uid:"-1",name:e.coverName,status:"done",url:e.cover}]:[]),O={beforeUpload:t=>!1,maxCount:1,fileList:o,onChange:({fileList:t})=>{I(t)}},R=t=>{var r;$.Inertia.post("/books",{...t,cover:(r=o==null?void 0:o[0])==null?void 0:r.originFileObj},{errorBag:"-1",preserveScroll:!0,onSuccess:()=>{s.resetFields(),I([]),m([])}})},T=t=>{var g;const r={...t,_method:"put"},v=(g=o[0])==null?void 0:g.uid;v&&v!=="-1"&&(r.cover=o[0].originFileObj),$.Inertia.post(`/books/${e.id}`,r,{forceFormData:!0,errorBag:`${e.id}`,preserveScroll:!0})},d=()=>e?i==null?void 0:i[`${e.id}`]:i==null?void 0:i["-1"];return a(C,{children:c("div",{className:"rounded bg-gray-100 shadow-sm p-4",children:[a(A,{icon:x.faCaretRight})," ",e?e.name:"Add New Book",c(l,{form:s,name:"basic",className:"max-w-[500px] mx-auto",labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:!0},onFinish:e?T:R,autoComplete:"off",method:"post",encType:"multipart/form-data",children:[a(l.Item,{label:"Book Name",name:"name",initialValue:e==null?void 0:e.name,validateStatus:((N=d())==null?void 0:N.name)&&"error",help:(F=d())==null?void 0:F.name,children:a(u,{})}),a(l.Item,{label:"Cover",name:"cover",valuePropName:"fileList",validateStatus:((w=d())==null?void 0:w.cover)&&"error",help:(S=d())==null?void 0:S.cover,children:a(C,{children:a(M,{...O,listType:"picture-card",children:c("div",{children:[a(z,{}),a("div",{style:{marginTop:8},children:"Upload"})]})})})}),a(l.Item,{name:"pdf",label:"PDF Link",initialValue:e==null?void 0:e.pdf,validateStatus:((B=d())==null?void 0:B.pdf)&&"error",help:(_=d())==null?void 0:_.pdf,children:a(u,{})}),a(l.Item,{name:"playlist_id",label:"Youtube playlist id",validateStatus:((P=d())==null?void 0:P.playlist_id)&&"error",help:(D=d())==null?void 0:D.playlist_id,children:a(u,{})}),n.map((t,r)=>a(q,{id:t,video:e?e.videos[t]:null,count:r,removeVideo:L},t)),a(l.Item,{wrapperCol:{offset:16,span:20},children:a(V,{onClick:t=>h(t),type:"link",children:"+ Add Video"})}),a(l.Item,{wrapperCol:{offset:10,span:16},children:a(V,{type:"primary",htmlType:"submit",children:"Save"})})]}),e&&a(E,{href:`/books/${e.id}`,method:"delete",as:"button",className:"ant-btn ant-btn-link ant-btn-dangerous",children:"Delete"})]})})}function le({booksDB:e}){const s=e.map(i=>new Y(i));return c("div",{className:"container my-16 flex flex-col gap-4",children:[a(j,{}),s.map(i=>a(j,{book:i},i.id))]})}export{le as default};
