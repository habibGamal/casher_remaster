import{j as o,C as S,r as h,a as d,R as C,B as g}from"./app.3aad4e87.js";import{u as E,M}from"./useLoading.7900d1a7.js";import{F as c}from"./index.4d07e239.js";import{S as N}from"./index.c383cf70.js";const O={labelCol:{md:{span:12},lg:{span:24},xl:{span:24}},wrapperCol:{md:{span:12},lg:{span:24},xl:{span:24}}},v={md:24,lg:12,xl:8};function L(e){const a=[];return e.forEach(r=>{r.col?a.push([]):a[a.length-1].push(r)}),a.map(r=>o(S,{...v,children:r.map(n=>o(c.Item,{name:n.name,label:n.label,valuePropName:n.valuePropName,children:n.component}))}))}const j=()=>{const[e,a]=h.exports.useState(),r=s=>e!=null&&e.hasOwnProperty(s)?"error":"success",n=s=>e==null?void 0:e[s];return{setErrors:a,getError:s=>({validateStatus:r(s),help:r(s)?n(s):""}),errors:e}};function y(e){let a=[];return e.forEach(r=>{r.name&&a.push(r.name)}),a}const A=({baseRoute:e,absRoute:a,formName:r,formItems:n,initValues:m,modelToEdit:s,closeModal:f,submitBtnText:F="\u062D\u0641\u0638"})=>{const[l]=c.useForm(),p=E(),{setErrors:b,errors:u}=j(),x=i=>{const t=M.setFormGlobalSettings({modelId:s==null?void 0:s.id,form:l,formValues:i,stateLoading:p.stateLoading,closeFormModal:f,setErrors:b});s?t.update(e):t.create(e,a)};return h.exports.useEffect(()=>{if(u){const i=y(n);l.setFields(i.map(t=>({name:t,errors:[]}))),l.setFields(Object.keys(u).map(t=>({name:t,errors:[u[t]]})))}},[u]),d(c,{...O,form:l,name:r,onFinish:x,initialValues:m,className:"p-8 border-2 border-indigo-500 rounded-md bg-indigo-50 dark:bg-transparent dark:border-none",layout:"vertical",scrollToFirstError:!0,children:[o(C,{gutter:24,justify:"center",children:L(n)}),o(c.Item,{className:"grid place-items-center mt-8",children:d(N,{children:[o(g,{type:"primary",htmlType:"submit",loading:p.loading,children:F}),o(g,{htmlType:"button",onClick:()=>{},children:"\u0627\u0639\u0627\u062F\u0629 \u0645\u0644\u0626 \u0627\u0644\u0645\u062F\u062E\u0644\u0627\u062A"})]})})]})};export{A as F};
